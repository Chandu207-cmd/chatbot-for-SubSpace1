tables:
  - table:
      schema: public
      name: chats
    select_permissions:
      - role: user
        permission:
          columns: ["id","user_id","title","created_at"]
          filter:
            user_id:
              _eq: X-Hasura-User-Id
    insert_permissions:
      - role: user
        permission:
          columns: ["title"]
          check:
            user_id:
              _eq: X-Hasura-User-Id
          set:
  user_id: X-Hasura-User-Id
    update_permissions:
      - role: user
        permission:
          columns: ["title"]
          filter:
            user_id:
              _eq: X-Hasura-User-Id
          check:
            user_id:
              _eq: X-Hasura-User-Id
    delete_permissions:
      - role: user
        permission:
          filter:
            user_id:
              _eq: X-Hasura-User-Id
  - table:
      schema: public
      name: messages
    select_permissions:
      - role: user
        permission:
          columns: ["id","chat_id","sender","content","created_at"]
          filter:
            chat:
              user_id:
                _eq: X-Hasura-User-Id
    insert_permissions:
      - role: user
        permission:
          columns: ["chat_id","sender","content"]
          check:
            chat:
              user_id:
                _eq: X-Hasura-User-Id
